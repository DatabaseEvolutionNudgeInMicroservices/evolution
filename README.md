# DENIM Evolution

[![pipeline status](https://gitlab.unamur.be/denim/evolution/badges/master/pipeline.svg)](https://gitlab.unamur.be/denim/evolution/-/commits/master)

## üì£ Description

This application enables to get evolution insights of a microservices architecture from a data perspective.

## ‚≠ê Features

Here is a summary of the features currently supported.

### Metrics

#### Description

It transforms a static analysis report logic object into a treemap view object.

#### Implementation status

| Transformation    | Implementation status |
| ----------------- | --------------------- |
| Technologies list | üåï                    |
| Operations list   | üåï                    |
| Concepts list     | üåï                    |

#### How to?

**INPUT**

Invoke the following routes by sending a static analysis report in JSON (obtained from [DENIM Reverse Engineering](https://github.com/DatabaseEvolutionNudgeInMicroservices/reverse-engineering)) inside the request.

Routes:

- [POST /technologies] (http://localhost:3000/technologies) for retrieving the list of technologies used in the microservices architecture.
- [POST /operations] (http://localhost:3000/operations) for retrieving the list of operations used in the microservices architecture.
- [POST /concepts] (http://localhost:3000/concepts) for retrieving the list of data concepts used in the microservices architecture.

**OUTPUT**

Consult the response view object in JSON:

```json
// Technologies

// Operations

// Concepts
```

## üë©‚Äçüíª Development details

### Setup

See [INSTALL file](INSTALL.md).

### Test the app (manually)

Manual test suites are set up thanks through the [Postman](https://www.postman.com/) tool.

The tests are specified in the `/test/manual` directory and are named following the `*.test.js` pattern.

### Test the app (unit testing)

Unit test suites are set up thanks to the [Jest](https://www.npmjs.com/package/jest) framework.

The tests are specified in the `/test/unit` directory and are named following the `*.test.js` pattern.

The configuration of Jest is stated in the `/package.json` file.

The tests running computes the code coverage.

#### Launching the tests

- Launch the unit tests.

  ```bash
  npm run test_unit
  ```

### Test the app (integration testing)

Integration test suites are set up thanks to the [SuperTest](https://www.npmjs.com/package/supertest) framework.

The tests are specified in the `/test/integration` directory and are named following the `*.test.js` pattern.

The configuration of Jest is stated in the `/package.json` file.

#### Preparing the environment with Docker

- Launch the application on Docker (cf. [Dockerize the application](#dockerize-the-application)).

#### Launching the tests

- Launching integration tests.

  ```bash
  npm run test_integration
  ```

### Documentation

An autogenerated documentation is available thanks to SwaggerUI
at [http://localhost:3000/docs](http://localhost:3000/docs).

- Generate the documentation.

  ```bash
  npm run swagger
  ```

### CI/CD

A CI/CD process is set up thanks to GitLab CI/CD.
Learn more about GitLab CI/CD via [this page](https://docs.gitlab.com/ee/ci/).

This one is described in the `.gitlab-ci.yml`.
‚ö†Ô∏è Right privileges must be granted to Docker on the session on which the CI is executed.

### Linting

- Lint the application.

  ```sh
  npm run lint
  ```

### Formatting

- Formatting the application.

  ```sh
  npm run format
  ```

## ü™õ Technical details

### Technologies

- JavaScript
- Docker

### Libraries

#### Project configuration

- [expressjs](https://www.npmjs.com/package/express) is a backend NodeJS framework.
- [body-parser](https://www.npmjs.com/package/body-parser) is used for parsing REST API request body.
- [cors](https://www.npmjs.com/package/cors) is used for managing CORS.

#### Tests

- [Jest](https://www.npmjs.com/package/jest) is used for unit testing.
- [SuperTest](https://www.npmjs.com/package/supertest) is used for integration testing.

#### Format

- [eslint](https://eslint.org/) is used for linting the code.
- [prettier](https://prettier.io/) is used for formatting the code.

#### Documentation

- [swagger-autogen](https://www.npmjs.com/package/swagger-autogen) is used for SWAGGER documentation.
- [swagger-ui-express](https://www.npmjs.com/package/swagger-ui-express) is used UI SWAGGER documentation.

### Tools

- [npm](https://www.npmjs.com/) is the package manager used.
- [GitLab CI/CD](https://docs.gitlab.com/ee/ci/) is the CI/CD continuous tool used.
- [Docker Desktop](https://docs.docker.com/desktop/windows/install/) is the containerization technology used.
- [Postman](https://www.postman.com/) is the tool for testing manually the API.

## ü§ù Contributing

If you want to contribute to the project, please consider the following instructions:

- Any contribution must be tested (unit and integration tests).
- All the tests and the CI/CD pipeline must pass before definitively integrating the contribution.
- Any contribution must be documented, especially by updating the `README.md` and the `INSTALL.md` file.
- Any contribution must be approved via the pull request mechanism.
- More generally, any contribution must follow the conventions and keep the shape of previous contributions.
